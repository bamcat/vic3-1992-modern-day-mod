# BACKGROUND: https://en.wikipedia.org/wiki/2004_Indian_Ocean_earthquake_and_tsunami 
# ONE OF THE WORST ON RECORD

namespace = indian_ocean_tsunami

indian_ocean_tsunami.1 = {
	type = country_event
	placement = ROOT
	title = indian_ocean_tsunami.1.t
	desc = indian_ocean_tsunami.1.d
	flavor = indian_ocean_tsunami.1.f

	duration = 5
	cooldown = { days = very_long_modifier_time }

	event_image = {
		video = "unspecific_iceberg"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_disaster.dds"

	trigger = {
		date > 2004.11.25
		OR = {
			 tag = IDS # Indonesia
             tag = SRI # Sri Lanka
             tag = THA # Thailand
             tag = IDA # India
             tag = MLD # Maldives
		}
		NOT = { has_variable = tsunami_has_struck }
	}

	immediate = {
		set_variable = tsunami_has_struck
		save_scope_as = tsunami_country

		every_state = {
			limit = {
				is_coastal = yes
				owner = ROOT
			}
			add_modifier = {
				name = tsunami_local_destruction
				days = 1080
				multiplier = 1
			}
		}
		
	}

	option = {
		name = indian_ocean_tsunami.1.a
		add_radicals = {
			value = 0.15
		}
		add_modifier = {
			name = tsunami_disaster_struck
			days = 1080
			multiplier = 1
		}
	}
}

indian_ocean_tsunami.2 = {
	type = country_event
	placement = ROOT
	title = indian_ocean_tsunami.2.t
	desc = indian_ocean_tsunami.2.d
	flavor = indian_ocean_tsunami.2.f

	duration = 5
	cooldown = { days = very_long_modifier_time }

	event_image = {
		video = "unspecific_iceberg"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	immediate = {
		save_scope_as = donor_country
	}

	option = {
		name = indian_ocean_tsunami.2.a  # Send Aid
		set_variable = has_sent_iosa
		add_modifier = {
			name = tsunami_foreign_aid_sent
			days = 365
		}
		add_treasury = -125000
		every_country = { limit = { has_variable = tsunami_has_struck }
		add_relations = {
			target = scope:donor_country
			value = 25
		}
		trigger_event = {
				id = indian_ocean_tsunami.3
				target = scope:tsunami_country
			}
		}
	}

	option = {
		name = indian_ocean_tsunami.2.b  # Do Nothing
		set_variable = has_sent_iosa
		add_radicals = {
			value = 0.01
		}
	}
}

indian_ocean_tsunami.3 = {
	type = country_event
	placement = ROOT
	title = indian_ocean_tsunami.3.t
	desc = indian_ocean_tsunami.3.d
	event_image = {
		video = "unspecific_politicians_arguing"
	}
	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	immediate = {
		add_loyalists = {
			value = 0.05
			pop_type = peasants
		}
	}
	option = {
		name = indian_ocean_tsunami.3.a
		add_treasury = 25000
	}
}
